<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amnesiac - Storyteller Phrases</title>
    <link rel="stylesheet" href="/styles.css">

  </head>
  <body>
    <nav class="nav-bar">
      <div class="nav-content">
        <a href="/" class="nav-link">‚Üê Back to Characters</a>
        <span style="color: #ffd700; font-weight: bold">Amnesiac</span>
      </div>
    </nav>

    <div class="container">
      <header>
        <h1>Amnesiac</h1>
        <p class="subtitle">Storyteller Phrases & Suggestions</p>
      </header>

              <div class="character-info">
          <h3 style="color: #ffd700; margin-bottom: 1rem">Amnesiac</h3>
          <p>
            The Amnesiac is a Townsfolk with an ability that reads:
            <div>
            <quote>
              You do not know what your ability is. Each day, privately guess
              what it is: you learn how accurate you are.
            </quote></div>
          </p>
          <div style="margin-top: 1rem; text-align: right;">
            <a href="#" id="wikiLink" target="_blank" rel="noopener noreferrer" class="wiki-button">
              üìñ View on Wiki
            </a>
          </div>
        </div>

      <div class="random-phrase-text">
        <quote id="randomPhraseText"></quote>
      </div>

             <button class="random-button" onclick="showRandomPhrase()">
         üé≤ Get Different Phrase
       </button>

       <div class="all-phrases-section">
         <div class="phrases-header">
           <h3 style="color: #ffd700; margin: 2rem 0 1rem 0">All Possible Phrases</h3>
           <button class="toggle-button" onclick="togglePhrases()" id="toggleButton">
             Show All Phrases
           </button>
         </div>
         <div class="phrases-grid" id="allPhrases" style="display: none;"></div>
       </div>

       </div>

      <footer>
        <p>Part of the <a href="https://arcane-scripts.net" target="_blank" rel="noopener noreferrer">Arcane Scripts</a> toolkit</p>
      </footer>
    </div>

    <script>
      const wikiLink = 'https://wiki.bloodontheclocktower.com/Amnesiac';

      // https://docs.google.com/spreadsheets/d/1k6lWtAKBFWTCq4vKLafn5L2kqPd5XA7CaMyR2RpHsAo/edit?gid=0#gid=0
      const phrases = [
        {
          text: "You start knowing 'Egg'. Non-Demon players who choose you with their ability will learn 'Egg' instead."
        },
        {
          text: "Each night*, guess a word. You learn if it was in the Wizard's wish.",
        },
        {
          text: "Each night*, if someone was executed learn the alignment of the player who nominated them.",
        },
        {
          text: "Each night, choose a player. You learn how many steps they are from the nearest Minion/Demon/Evil player."
        },
        {
          text: "Each night, choose a player. You learn how many living players are between yourself and the nearest Minion/Demon/Evil player."
        },
        {
          text: "Each night, pick a player, you learn if one of their alive neighbours is a Demon."
        },
        {
          text: "You start knowing two players of opposite alignments. Each night*, if one of them dies, you learn a new living player of their alignment."
        },
        {
          text: "Each night, pick a player, you learn if one of their alive neighbours is a Demon."
        },
        {
          text: "Each night*, learn a not in play Townsfolk.",
        },
        {
          text: "Each night*, learn a not in play character.",
        },
        {
          text: "Each night*, learn one of the characters shown as Demon/Minion bluffs.",
        },
        {
          text: "Each night*, learn one in play character."
        },
        {
          text: "Each night, choose a player. Learn the number of steps from them to the nearest player of matching character type.",
        },
        {
          text: "Each night, if at least one of your living neighbours wakes up, you wake up with exactly one of them.",
        },
        {
          text: "Each night, choose a player. The chosen player chooses a player. The chosen player learns if that player has any Evil living neighbours."
        },
        {
          text: "Each night*, you learn if the player executed yesterday and the player who nominated them are the same alignment.",
        },
        {
          text: "Each night, choose a player. You learn how many players in a row, starting from them, have the same character type.",
        },
        {
          text: "Each night*, choose a player. You learn whether they have the same alignment as the last executed player.",
        },
        {
          text: "Each night, choose a number. You learn the letter in that position from the first name of an Evil player chosen by the Storyteller. If the number is greater than the length of the longest applicable name, you learn nothing."
        },
        {
          text: "Each night, choose a player. You become their alignment."
        }
      ];

      function showRandomPhrase() {
        const randomIndex = Math.floor(Math.random() * phrases.length);
        const phrase = phrases[randomIndex];

        document.getElementById('randomPhraseText').textContent = phrase.text;
      }

      // Show random phrase when page loads
      document.addEventListener('DOMContentLoaded', function() {
        showRandomPhrase();
        showAllPhrases();
        loadPhrasesVisibility();
        setWikiLink();
      });

      function showAllPhrases() {
        const phrasesGrid = document.getElementById('allPhrases');
        const sortedPhrases = [...phrases]
          .filter(phrase => phrase.text) // Only include phrases with text property
          .sort((a, b) => a.text.localeCompare(b.text));
        sortedPhrases.forEach(phrase => {
          const phraseDiv = document.createElement('div');
          phraseDiv.className = 'phrase-item';
          phraseDiv.textContent = phrase.text;
          phraseDiv.onclick = () => {
            document.getElementById('randomPhraseText').textContent = phrase.text;
          };
          phrasesGrid.appendChild(phraseDiv);
        });
      }

      function togglePhrases() {
        const phrasesGrid = document.getElementById('allPhrases');
        const toggleButton = document.getElementById('toggleButton');
        const isVisible = phrasesGrid.style.display !== 'none';

        if (isVisible) {
          phrasesGrid.style.display = 'none';
          toggleButton.textContent = 'Show All Phrases';
          localStorage.setItem('phrasesVisible', 'false');
        } else {
          phrasesGrid.style.display = 'grid';
          toggleButton.textContent = 'Hide All Phrases';
          localStorage.setItem('phrasesVisible', 'true');
        }
      }

      function loadPhrasesVisibility() {
        const phrasesGrid = document.getElementById('allPhrases');
        const toggleButton = document.getElementById('toggleButton');
        const savedVisibility = localStorage.getItem('phrasesVisible');

        if (savedVisibility === 'true') {
          phrasesGrid.style.display = 'grid';
          toggleButton.textContent = 'Hide All Phrases';
        } else {
          phrasesGrid.style.display = 'none';
          toggleButton.textContent = 'Show All Phrases';
        }
      }

      function setWikiLink() {
        const wikiLinkElement = document.getElementById('wikiLink');
        wikiLinkElement.href = wikiLink;
      }

      function copyPhrase(element) {
        const phraseText = element.querySelector('.phrase-text').textContent;
        const button = element.querySelector('.copy-button');

        navigator.clipboard
          .writeText(phraseText)
          .then(() => {
            button.textContent = 'Copied!';
            button.classList.add('copied');

            setTimeout(() => {
              button.textContent = 'Copy';
              button.classList.remove('copied');
            }, 2000);
          })
          .catch((err) => {
            console.error('Failed to copy: ', err);
            button.textContent = 'Failed';
            setTimeout(() => {
              button.textContent = 'Copy';
            }, 2000);
          });
      }
    </script>
  </body>
</html>
