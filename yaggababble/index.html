<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yaggababble - Storyteller Phrases</title>
    <link rel="stylesheet" href="/styles.css">

  </head>
  <body>
    <nav class="nav-bar">
      <div class="nav-content">
        <a href="/" class="nav-link">‚Üê Back to Characters</a>
        <span style="color: #ffd700; font-weight: bold">Yaggababble</span>
      </div>
    </nav>

    <div class="container">
      <header>
        <h1>Yaggababble</h1>
        <p class="subtitle">Storyteller Phrases & Suggestions</p>
      </header>

              <div class="character-info">
          <h3 style="color: #ffd700; margin-bottom: 1rem">Yaggababble</h3>
          <p>
            The Yaggababble is a Demon with an ability that reads:
            <div>
            <quote>
              You start knowing a secret phrase. For each time you said it publicly today, a player might die.
            </quote></div>
          </p>
          <div style="margin-top: 1rem; text-align: right;">
            <a href="#" id="wikiLink" target="_blank" rel="noopener noreferrer" class="wiki-button">
              üìñ View on Wiki
            </a>
          </div>
        </div>

      <div class="random-phrase-text">
        <quote id="randomPhraseText"></quote>
        <span class="display-icon" id="randomDisplayIcon" onclick="showPhraseOverlay()" onkeydown="if(event.key==='Enter'||event.key===' ') {event.preventDefault(); showPhraseOverlay();}" role="button" tabindex="0" style="display: none;">‚õ∂</span>
      </div>

             <button class="random-button" onclick="showRandomPhrase()">
         üé≤ Get Different Phrase
       </button>

       <div class="all-phrases-section">
         <div class="phrases-header">
           <h3 style="color: #ffd700; margin: 2rem 0 1rem 0">All Possible Phrases</h3>
           <button class="toggle-button" onclick="togglePhrases()" id="toggleButton">
             Show All Phrases
           </button>
         </div>
         <div class="phrases-grid" id="allPhrases" style="display: none;"></div>
       </div>

       </div>

      <footer>
        <p>Part of the <a href="https://arcane-scripts.net" target="_blank" rel="noopener noreferrer">Arcane Scripts</a> toolkit</p>
      </footer>
    </div>

    <!-- Full-screen overlay modal -->
    <div id="phraseOverlay" class="phrase-overlay" style="display: none;">
      <div class="overlay-content">
        <div class="overlay-header">
          <h2>Your Phrase Is:</h2>
          <button class="close-button" onclick="hidePhraseOverlay()">√ó</button>
        </div>
        <div class="phrase-display">
          <div id="overlayPhraseText" class="big-phrase"></div>
        </div>
        <div class="overlay-footer">
        </div>
      </div>
    </div>

    <script>
      const wikiLink = 'https://wiki.bloodontheclocktower.com/Yaggababble';
      const phrases = [
        {
          text: 'Too confident',
        },
        {
          text: 'Can we talk tomorrow?',
        },
        {
          text: 'Fill your boots',
        },
        {
          text: "I don't think that's true",
        },
        {
          text: "I don't understand",
        },
        {
          text: 'I saw you as Good',
        },
        {
          text: "I think that's the false one",
        },
        {
          text: 'I would never Starpass',
        },
        {
          text: "I've got a one",
        },
        {
          text: "That's obviously evil",
        },
        {
          text: 'They might be droisoned',
        },
        {
          text: 'Well we know that',
        },
        {
          text: "I completely agree",
        },
        {
          text: "I completely disagree",
        },
        {
          text: "I hard claimed it",
        },
        {
          text: "Is that a double claim?",
        },
        {
          text: "Is that the Yaggababble phrase?",
        },
        {
          text: "Witch check",
        },
        {
          text: "I'm not sure",
        },
        {
          text: "Too many hands",
        },
        {
          text: "According to [name]",
        },
        {
          text: "I'm not sure",
        },
        {
          text: "I'm not Evil",
        },
        {
          text: "I'm the Demon",
        },
        {
          text: "My neighbours",
        },
        {
          text: "Unless I'm poisoned",
        },
        {
          text: "My world is",
        },
        {
          text: "Let's consider",
        },
      ];

      function showRandomPhrase() {
        const randomIndex = Math.floor(Math.random() * phrases.length);
        const phrase = phrases[randomIndex];

        document.getElementById('randomPhraseText').textContent = phrase.text;
        // Show the display icon when a phrase is shown
        document.getElementById('randomDisplayIcon').style.display = 'inline-block';
      }

      // Show random phrase when page loads
      document.addEventListener('DOMContentLoaded', function() {
        showRandomPhrase();
        showAllPhrases();
        loadPhrasesVisibility();
        setWikiLink();
      });

      function showAllPhrases() {
        const phrasesGrid = document.getElementById('allPhrases');
        const sortedPhrases = [...phrases]
          .filter(phrase => phrase.text) // Only include phrases with text property
          .sort((a, b) => a.text.localeCompare(b.text));
        for (const phrase of sortedPhrases) {
          const phraseDiv = document.createElement('div');
          phraseDiv.className = 'phrase-item';
          phraseDiv.textContent = phrase.text;
          phraseDiv.onclick = () => {
            document.getElementById('randomPhraseText').textContent = phrase.text;
            document.getElementById('randomDisplayIcon').style.display = 'inline-block';
          };
          phrasesGrid.appendChild(phraseDiv);
        }
      }

      function togglePhrases() {
        const phrasesGrid = document.getElementById('allPhrases');
        const toggleButton = document.getElementById('toggleButton');
        const isVisible = phrasesGrid.style.display !== 'none';

        if (isVisible) {
          phrasesGrid.style.display = 'none';
          toggleButton.textContent = 'Show All Phrases';
          localStorage.setItem('phrasesVisible', 'false');
        } else {
          phrasesGrid.style.display = 'grid';
          toggleButton.textContent = 'Hide All Phrases';
          localStorage.setItem('phrasesVisible', 'true');
        }
      }

      function loadPhrasesVisibility() {
        const phrasesGrid = document.getElementById('allPhrases');
        const toggleButton = document.getElementById('toggleButton');
        const savedVisibility = localStorage.getItem('phrasesVisible');

        if (savedVisibility === 'true') {
          phrasesGrid.style.display = 'grid';
          toggleButton.textContent = 'Hide All Phrases';
        } else {
          phrasesGrid.style.display = 'none';
          toggleButton.textContent = 'Show All Phrases';
        }
      }

      function setWikiLink() {
        const wikiLinkElement = document.getElementById('wikiLink');
        wikiLinkElement.href = wikiLink;
      }

      function copyPhrase(element) {
        const phraseText = element.querySelector('.phrase-text').textContent;
        const button = element.querySelector('.copy-button');

        navigator.clipboard
          .writeText(phraseText)
          .then(() => {
            button.textContent = 'Copied!';
            button.classList.add('copied');

            setTimeout(() => {
              button.textContent = 'Copy';
              button.classList.remove('copied');
            }, 2000);
          })
          .catch((err) => {
            console.error('Failed to copy: ', err);
            button.textContent = 'Failed';
            setTimeout(() => {
              button.textContent = 'Copy';
            }, 2000);
          });
      }

      // Overlay functions
      function showPhraseOverlay(phraseText = null) {
        const overlay = document.getElementById('phraseOverlay');
        const overlayPhraseText = document.getElementById('overlayPhraseText');

        // Use provided phrase text or get from random phrase display
        const textToShow = phraseText || document.getElementById('randomPhraseText').textContent;
        overlayPhraseText.textContent = textToShow;

        overlay.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // Prevent background scrolling
      }

      function hidePhraseOverlay() {
        const overlay = document.getElementById('phraseOverlay');
        overlay.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restore scrolling
      }

      // Close overlay when clicking outside the content
      document.addEventListener('click', function(e) {
        const overlay = document.getElementById('phraseOverlay');
        if (e.target === overlay) {
          hidePhraseOverlay();
        }
      });

      // Close overlay with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          hidePhraseOverlay();
        }
      });
    </script>
  </body>
</html>
